<script>
function calc() {
    var brandBaseKcal = parseFloat(document.getElementById('brand').value);
    var formulaMod = parseFloat(document.getElementById('formulaType').value);
    var stageMultiplier = parseFloat(document.getElementById('stage').value);
    var p = parseFloat(document.getElementById('peso').value);
    var u = document.getElementById('unit').value;
    var r = document.getElementById('res');

    var kcalPerCup = brandBaseKcal * formulaMod;

    if(p > 0) {
        var pesoKg = (u === "lb") ? (p / 2.20462) : p;
        var dailyKcal = (30 * pesoKg + 70) * stageMultiplier;
        var cups = dailyKcal / kcalPerCup;
        var grams = cups * 105; 

        r.style.display = 'block';
        r.innerHTML = `
            <div style="font-size: 13px; color: #666; font-weight: bold;">TOTAL DAILY SERVING (TOTAL POR DÍA):</div>
            <div style="font-size: 30px; font-weight: bold; color: #854d0e;">${cups.toFixed(1)} cups</div>
            <div style="font-size: 16px; color: #a16207; margin-bottom: 10px;">or ${Math.round(grams)} grams</div>
            
            <div style="font-size: 12px; color: #854d0e; border-top: 1px solid #fde68a; padding-top: 8px;">
                <strong>Suggested:</strong> ${(cups/2).toFixed(2)} cups per meal (2 meals a day)
            </div>

            <p style="font-size: 9px; color: #aaa; margin-top: 15px; line-height: 1.1;">
                *Disclaimer: This is an estimate. Does not replace veterinary advice. / 
                Aviso: Es una estimación. No reemplaza la consulta al veterinario.
            </p>
        `;

        window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });

    } else {
        alert("Please enter a weight.");
    }
}
</script>

</body>
</html>
